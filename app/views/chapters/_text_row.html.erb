<% collapse_id = "text-detail-#{text.id}-#{rand(1000)}" %>

<div class="text-center mb-3">
  <h3 class="text-number"><%= chapter_text.position %></h3>
  <button class="btn text-detail-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#<%= collapse_id %>" aria-expanded="false" aria-controls="<%= collapse_id %>">
    <span class="collapsed"><i class="fas fa-chevron-down"></i></span>
    <span class="expanded"><i class="fas fa-chevron-up"></i></span>
  </button>

  <div class="text-detail collapse container my-3" id="<%= collapse_id %>">
    <%= render partial: 'text-detail', locals: { text: text } %>
  </div>

<div class="mb-5">
  <%= text.text %>
</div>